(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{c0b4:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"q-pa-md row justify-center"},[t("div",{staticClass:"col-6",staticStyle:{height:"70vh"}},[t("q-scroll-area",{ref:"scroll",staticClass:"q-px-md",staticStyle:{height:"75vh"},on:{scroll:e.scrollPosition}},e._l(e.allMessages,(function(s,a){return t("div",{key:a},[2==s.userId?t("q-chat-message",{attrs:{avatar:"https://cdn.quasar.dev/img/avatar3.jpg",sent:"",stamp:"7 minutes ago"}},[e._v("\n          "+e._s(s.message)+"\n          "),s.image?t("img",{attrs:{src:s.image,height:"100px"}}):e._e()]):t("q-chat-message",{attrs:{avatar:"https://cdn.quasar.dev/img/avatar4.jpg",stamp:"4 minutes ago"}},[e._v("\n          "+e._s(s.message)+"\n          "),s.image?t("img",{attrs:{src:s.image,height:"100px"}}):e._e()])],1)})),0),t("div",{staticClass:"q-py-md"},[t("q-input",{attrs:{outlined:"","bottom-slots":""},on:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.sendMessage(s)}},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-btn",{attrs:{round:"",dense:e.dense,flat:"",icon:"attach_file"},on:{click:function(s){return e.$refs.FileInput.pickFiles()}}}),t("q-btn",{attrs:{round:"",dense:e.dense,flat:"",icon:"send"},on:{click:e.sendMessage}})]},proxy:!0}]),model:{value:e.message,callback:function(s){e.message=s},expression:"message"}})],1),t("q-file",{ref:"FileInput",staticStyle:{display:"none"},attrs:{accept:".jpg, image/*"},on:{input:e.uploadImage},model:{value:e.file,callback:function(s){e.file=s},expression:"file"}})],1)])},i=[],l=(t("e6cf"),{name:"ChatPage",data(){return{allMessages:[],message:"",user:{id:2,name:"Jono"},file:null,dense:!1}},created(){this.fetchMessage()},methods:{async fetchMessage(){0!=this.allMessages.legth&&(await this.$db.collection("chats").orderBy("createdAt").onSnapshot((e=>{let s=[];e.forEach((e=>{s.push(e.data())})),this.allMessages=s,this.$refs.scroll.setScrollPosition(909,1)})),this.$refs.scroll.setScrollPercentage(1))},sendMessage(){this.$db.collection("chats").add({userId:this.user.id,user:this.user,message:this.message,image:this.file?"https://firebasestorage.googleapis.com/v0/b/vue-chat-4681a.appspot.com/o/"+image+"?alt=media":null,createdAt:new Date}),this.message=null,this.file=null,this.fetchMessage()},uploadImage(e){const s=this.$firebase.storage().ref().child(e.name);s.put(e).then((s=>{console.log("Uploaded a blob or file!"),this.sendMessage(e.name)})),this.message=null,this.fetchMessage()},scrollPosition(e){}}}),n=l,o=t("2877"),c=Object(o["a"])(n,a,i,!1,null,null,null);s["default"]=c.exports}}]);